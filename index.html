<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"miucun97.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Miucun&#39;s blog">
<meta property="og:url" content="https://miucun97.github.io/index.html">
<meta property="og:site_name" content="Miucun&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Miucun">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://miucun97.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Miucun's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Miucun's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2022/06/07/%E8%AE%B0%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A2%AB%E6%A4%8D%E5%85%A5%E6%81%B6%E6%84%8F%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/07/%E8%AE%B0%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A2%AB%E6%A4%8D%E5%85%A5%E6%81%B6%E6%84%8F%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">记阿里云服务器被植入恶意脚本</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-07 22:10:13" itemprop="dateCreated datePublished" datetime="2022-06-07T22:10:13+08:00">2022-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-29 22:19:16" itemprop="dateModified" datetime="2022-06-29T22:19:16+08:00">2022-06-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="记阿里云服务器被植入恶意脚本"><a href="#记阿里云服务器被植入恶意脚本" class="headerlink" title="记阿里云服务器被植入恶意脚本"></a>记阿里云服务器被植入恶意脚本</h1><p>前言：前段时间，小菜鸟面试了深圳的一家公司，里面有个职务要求就是熟悉在阿里云服务器(Linux)中部署项目。平时在公司是部署在window的服务器中，而且是自家的服务器，一切配置都已被安装好，安全方面是安装了360安全卫士。本人使用服务器就是将项目运行在服务器中，简而言之就是傻瓜式操作。稍微了解了一下行业，大多数企业都采用云服务器部署项目，于是抱着学习的状态，在阿里云申请免费使用一个月的服务器。</p>
<blockquote>
<p>服务器配置</p>
</blockquote>
<ul>
<li><p>1核2G CentOS操作系统</p>
</li>
<li><p>没有其他任何安全类软件（穷）</p>
</li>
<li><p>试用阶段，在服务器安装配置了Redis，没有设置密码（是的，就是它搞事情：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg4MjYzMjI1MA==&mid=2247524077&idx=3&sn=81491af64c009cdbb18446ba955efc01&chksm=cf516db8f826e4ae0f392a1a5abcdd1a4f0bd9504cd5aa82e4c1adf574f951a5b3eedfeeb7a6&scene=126&&sessionid=0">CPU被挖矿，Redis竟是内鬼！</a>）</p>
</li>
</ul>
<blockquote>
<p>事件缘由</p>
</blockquote>
<p>某一天中午，阿里云发短信给我：出现紧急安全事件，恶意脚本代码执行。当时大中午的就没管，还觉得我这么菜的配置谁会整我，打算下午上班再弄。结果上班一看：sun！cpu使用率100%？？中午吃饭没关Redis服务就忽然间百分百？</p>
<p>立马回想起安全报警，根据新手的第六感：不会中病毒了吧？？上网一搜，哦豁，其他人也试过这种情况，Delay no more（美丽的粤语），可能是被当肉鸡（被挖矿）或者门罗币…此时的我还置于震惊的状态：不是吧？我只是个小菜鸡，为啥要这么对我？ 好吧，代码无差别攻击。</p>
<p><img src="/images/assets/2022-06-15-09-24-33-image.png" alt="图1"></p>
<blockquote>
<p>处理</p>
</blockquote>
<p>一开始查到的方法都是 <code>top</code>查出谁在占用cpu，然后<code>kill</code>进程即可。哇，好简单！然后使用<code>top</code>时，并没有出现网友们查出的那种情况，是的，全部cpu使用率都很正常，没有特别高…好郁闷</p>
<p>方法二：用<code>pstree</code>也可以查出来哦！emmm,经实践：同样没有出现理想情况。</p>
<p>无奈，寻求阿里云客服，客服给出的答复是：</p>
<p><img src="/images/assets/2022-06-15-09-29-37-7bcc67580253f6880f77976aee16cc5.png" alt="图2"></p>
<p>虽然我是新手，但我也想学习呀~想了想，算了，我自己解决。于是开始了面向搜索引擎查找解决方法。一切那么凑巧，我找了一篇类似的：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/373738540">阿里云服务器发现挖矿病毒(crypto和pnscan)导致CPU占用100%问题解决方案(超详细</a></p>
<p>这篇文章帮了我挺多，根据步骤做，的确发现系统上存在一个<em>pnscan</em>文件夹，在进程中看到有不正常的<em>crypto</em>，但是没找到它在哪个位置。</p>
<p>阅读了很多篇博客，也大概猜测出来服务器遭受攻击的原因了，就是利用了Reids的一些漏洞，Redis服务暴露在公网中且没有添加密码，刚好本初学者就完美踩坑了！</p>
<p>*<em>开始处理</em>***：</p>
<ul>
<li><p>删除ssh密钥文件 </p>
<ul>
<li><p>文件在<code>/root/.ssh/</code>目录下，果然发现了<code>authority_keys</code>的文件，哈哈小样，删除嘛！我会！<code>rm -rf</code>就可以啦！哈哈，果然没这么简单呢~不允许被删除，话不多说，继续找</p>
</li>
<li><p>原来是被设置了隐藏文件属性不给删啊，使用<code>lsattr</code>就可以查看当前文件的属性</p>
<p><img src="/images/assets/2022-06-15-09-44-12-image.png" alt="图3"></p>
<p>果不其然，查到文件有a、i属性：</p>
<p>            <img src="/images/assets/2022-06-15-09-45-09-image.png" alt="图4">            </p>
<p>简单嘛，博客上说用<code>chattr</code>就可以啦~~是啊，果不其然用不了呢！！SUN！竟然对这个命令动了手脚！！<code>Permission denied</code></p>
</li>
</ul>
</li>
<li><p>功夫不负有心人，感谢踩坑的前人们：<a target="_blank" rel="noopener" href="https://blog.csdn.net/luoxiping1/article/details/118216787">bash: /usr/bin/chattr: Permission denied解决办法_luoxiping1的博客-CSDN博客</a>，</p>
</li>
<li><p>去除文件隐藏属性</p>
<ul>
<li><pre><code class="bash">chattr -属性 文件名
</code></pre>
</li>
</ul>
</li>
<li><p>终于成功删除<code>authority_keys</code>这个文件啦！！！！</p>
</li>
<li><p>根据第二步杀进程</p>
<ul>
<li><p>跟着教程走就对了，删不了的就去除属性再删</p>
</li>
<li><p>pnscan：<code>/usr/local/bin</code>，crypto的我没有找到它的文件</p>
</li>
<li><p>虽然但是，使用top还是没查出来谁占用这么多啊！！总之，把这里的文件删了就对了，然后redis的配置文件修改：<code>bind 0.0.0.0</code>改回<code>bind 127.0.0.1</code>（因为要暴露出去，所以当时这样设置了），kill了redis进程</p>
</li>
<li><p>后面发现和教程不一样了，就没按照它的做法了，就只是先这么删了</p>
</li>
</ul>
</li>
</ul>
<p>cpu使用率回到0.3%！可喜可贺！太好了！立马给redis设密码！为了测试是否安全了，重新有开启redis服务（配置文件0.0.0.0又改回去了），很好，运行半小时，没问题，成功!<del>完结撒花！</del></p>
<blockquote>
<p>惊喜再现     </p>
</blockquote>
<p>我就知道没这么容易，第二天早上趁着闲暇，打开了控制台，SUN！100%CPU使用率！这次云哥没给我报警啊！脑子里忽然想起昨天浏览过的博客，似乎有出现那么一句话：<code>定时任务</code></p>
<p>感动，又找到一篇博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/mdzz14/article/details/111656726">记一次CentOS7因Redis配置不当导致被Root提权沦为矿机修复过程_往事如烟隔多年的博客-CSDN博客</a>，看完这篇也是受益匪浅！</p>
<ul>
<li><p>使用<code>crontab -l</code>查看定时任务，好家伙，发现了一个奇怪的的文件</p>
<p><img src="/images/assets/2022-06-15-10-07-27-image.png" alt="图5"></p>
<p>打开一看，脚本，经学习，大概就是如何通过redis漏洞，往我的服务器中添加公钥，修改文件隐藏属性，植入定时任务等…（我的redis服务使用root用户开启的，所以就导致了这些问题），期间我还看到了一个ip地址：195.242.111.238（德国），但猜测也是假的</p>
</li>
<li><p>一回生二回熟，这次解决起来就轻车熟路了些，因为我的<code>top</code>命令暂时不起作用，所以我就换了顺序处理</p>
</li>
<li><p>处理</p>
<ul>
<li><p>删除定时任务：<code>crontab -r</code>。是的，又是权限不够呢~删除<code>/var/spool/cron/root</code>文件，不够权限就修改隐藏属性，<code>chattr</code>用不了，就按照前面说的去改一改就可以了，删除完毕后就可以删除定时任务了。</p>
</li>
<li><p>删除公钥(<code>/root/.ssh/</code>)</p>
</li>
<li><p><code>/etc/</code>目录下，继续删除<code>cron.*</code>脚本[<code>ls -l |grep cron</code>]，挖矿配置文件<code>zzh</code>、<code>zzhs</code>（教程说还有<code>config.json</code>，<code>newsvc.sh</code>，我木有这两个）</p>
</li>
<li><p><code>/tmp/</code>目录下，清理缓存文件</p>
</li>
<li><p>删除<code>pnscan</code>文件(<code>/usr/local/bin/</code>)，<code>crypto</code>我木有</p>
</li>
<li><p><code>top</code>：可以用了，终于看到真面目！占用了99.5%的内存的恶人！可惜没截图啊啊啊啊啊！</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CleverCode/article/details/45421925">Linux根据进程号查看进程位置_程序员大宝(coder-dabao)的博客-CSDN博客_linux根据进程号查进程信息</a>，借助进程号，找到相关的位置，并删除对应文件（<code>cwd</code>和<code>exe</code>处），ps:原本将newinit.sh复制到自家电脑上的，但是被defender识别为有毒文件，自动清理了。</p>
</li>
<li><p><code>kill -9 进程号</code></p>
</li>
<li><p>配置阿里云安全组，恢复被修改的命令等</p>
</li>
</ul>
</li>
</ul>
<p>一切归于平静！我又新增了一个普通用户，用于启动redis服务，修改了redis的端口，ssh登录时遇到的新问题：<a target="_blank" rel="noopener" href="https://blog.csdn.net/aa19891204/article/details/106812459?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-106812459-blog-123200169.pc_relevant_aa&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-106812459-blog-123200169.pc_relevant_aa&utm_relevant_index=2">linux上添加新的用户，并赋予ssh登录权限_哈哈，名字可以改的博客-CSDN博客_linux用户ssh权限设置</a>，root修改普通用户密码：<code>passwd 用户名</code>，Redis配置参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40907977/article/details/106207488?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-4-106207488-blog-111656726.pc_relevant_downloadblacklistv1&spm=1001.2101.3001.4242.3&utm_relevant_index=6">黑客攻防Redis拉锯战之Root提权_寰宇001的博客-CSDN博客_redis 提权</a></p>
<p>重新开启Redis服务，跑了16个小时，也就是我在写这篇记录时，暂时都还没出现问题。</p>
<blockquote>
<p>总结</p>
</blockquote>
<ul>
<li><p>安全意识时时有，常在心中；因为不同于以往的本机开发，服务器ip地址暴露在公网中</p>
</li>
<li><p>Redis配置需谨慎，暴露端口提供服务时注意安全</p>
</li>
<li><p>多熟悉Linux命令；幸好这次没有把<code>cp</code>,<code>chmod</code>,<code>mv</code>等命令给黑了，不然真的会笑。</p>
</li>
<li><p>学习root与普通用户权限分配，文件权限分配等</p>
</li>
<li><p>遇到恶意脚本不慌，喝杯茶再找大佬（开个玩笑），学会自己分析，从进程-&gt;定时任务-&gt;…</p>
</li>
</ul>
<p>解决完后又浏览到和我差不多情况的：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_64355285/article/details/122217328">一次Linux中的木马病毒解决经历_普通网友的博客-CSDN博客_linux木马</a></p>
<p>有问题可联系: <a href="mailto:miucunlee@gmail.com">miucunlee@gmail.com</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2022/04/28/%E5%85%B3%E4%BA%8Eflowable%20springboot%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/28/%E5%85%B3%E4%BA%8Eflowable%20springboot%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">关于flowable springboot的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-28 22:10:13" itemprop="dateCreated datePublished" datetime="2022-04-28T22:10:13+08:00">2022-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-29 22:21:46" itemprop="dateModified" datetime="2022-06-29T22:21:46+08:00">2022-06-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="关于flowable-springboot的简单使用"><a href="#关于flowable-springboot的简单使用" class="headerlink" title="关于flowable+springboot的简单使用"></a>关于flowable+springboot的简单使用</h1><h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>    什么是flowable？简单来说就是流程控制引擎，可以帮我们解决繁琐的流程控制，常用于OA系统。简单使用方法就是，我们画一个流程图，当图中某个业务完成时，flowable能根据我们写好的代码逻辑将流程跳到下一个业务中。如果想详细了解flowable，建议通过搜索引擎去学习。</p>
<p>    选用flowable缘由，因工作原因需要完成公司OA系统的一个模块，第一版本没有使用任何工作流，全靠自己编写代码进行控制，每执行完业务流程后，都需要再编写流程控制代码，非常地繁琐。恰巧需求大改，于是我又重新推翻第一版本进行全新的开发，从入门到基本流程开发完成花了大约两到三个星期，但是不巧，需求又有改动，于是现在正进行第三版本的开发。另外一个原因：flowable是基于activiti进行开发的，换句话说flowable就是activiti的新版本，GitHub中也有在更新。但是找到的学习视频基本上都是activiti的，不过两者相差不大，可以参考activiti的视频进行入门（这里安利一下小破站的黑马程序员的activiti视频），当然可以结合flowable文档一起查看。</p>
<h2 id="二、准备工作"><a href="#二、准备工作" class="headerlink" title="二、准备工作"></a>二、准备工作</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 开发工具：IntelliJ IDEA、SQLyog</span><br><span class="line"><span class="bullet">-</span> 版本：flowable v6.3.0、springboot v2.5.11-SNAPSHOT</span><br></pre></td></tr></table></figure>

<h3 id="1、springboot的准备"><a href="#1、springboot的准备" class="headerlink" title="1、springboot的准备"></a>1、springboot的准备</h3><p>    首先是先新建工程，我是使用Spring Initializr生成的工程，sdk是1.8，依赖引入勾选（Web、JDBC、MySQL、MyBatis）</p>
<p><img src="/images/assets/b4778eb3da7d05c6670c9e82c7d5dcd7fd4076ab.png" alt="图1"></p>
<p><img src="/images/assets/8fef19fa642e59a68e6ca64101aa3253d22f37ef.png" alt="图2"></p>
<h3 id="2、连接数据库"><a href="#2、连接数据库" class="headerlink" title="2、连接数据库"></a>2、连接数据库</h3><p>    在application.properties文件中写入：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#databaseName:数据库名,username和password就是你连接的数据库账号和密码</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/databaseName?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">username</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure>

<p>    接好后，可以自己编写个mapper（dao）来测试一下；对了，这里提一嘴，我使用的是MySQL，引擎是InnoDB。</p>
<h3 id="3、flowable依赖引入"><a href="#3、flowable依赖引入" class="headerlink" title="3、flowable依赖引入"></a>3、flowable依赖引入</h3><p>在pom.xml文件中引入依赖，我使用的是v6.3.0版本</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--flowable依赖 v6.3.0版本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.flowable<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flowable-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>引入后，启动一下工程，也就是有@SpringBootApplication的那个类，按理说没意外的话，打开你的数据库，会发现生成很多很多以act_开头的表，网上说生成二十几个表，但我生成了60+个表，emmm，是我打开的方式不对嘛..</p>
<p><img src="/images/assets/63dba0ee3cd356bfea5f41ea87713215bcd8da1f.png" alt="图3"></p>
<p>可能一下子看到这么多的表会很慌，但其实有规律可循，比如</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> act<span class="emphasis">_hi_</span><span class="emphasis">*: 中间是_hi_的，就是history的意思，一般用于存放历史数据。比如历史任务；</span></span><br><span class="line"><span class="emphasis">- act_ru_*</span>: 中间是<span class="emphasis">_ru_</span>的，是runtime的意思，一般用于存放运行中的数据，比如目前需要的变量等。</span><br><span class="line"><span class="bullet">-</span> 还有其他好多好多，但比较常用的就是这两个表，可以参考文档。</span><br></pre></td></tr></table></figure>

<h3 id="4、流程引入"><a href="#4、流程引入" class="headerlink" title="4、流程引入"></a>4、流程引入</h3><p>    若想我们的流程走起来，那肯定需要引入你的流程吧！若是以springboot的方式使用flowable的话，我们只需要将流程图（bpmn20）的xml文件放入resources目录下的processes目录中，没有该目录可以自己手动新建。然后重启一下程序，springboot就会自动帮我们将流程图以某种方式存进数据库中（表act_ge_bytearray、act_re_procdef可以看到）。</p>
<p><img src="/images/assets/5dc1450da7f2016d7ce2582865a21c0ac9f7995c.png" alt="图4"></p>
<ul>
<li>流程图采用什么工具？<ul>
<li>processOn、在线生成流程图网站、flowable modeler等</li>
</ul>
</li>
</ul>
<p>我使用的是flowable modeler，也就是flowable自带的工具。需要下载并部署到你电脑的tomcat中，故下面提一嘴如何安装和使用，本人踩坑多次，到现在依旧很迷惑。</p>
<p><strong>flowable modeler</strong></p>
<ul>
<li><p>下载和安装</p>
<ul>
<li><p>网址：<a target="_blank" rel="noopener" href="https://github.com/flowable/flowable-engine/releases">https://github.com/flowable/flowable-engine/releases</a></p>
</li>
<li><p>我选择的是6.3.0版本，选择第一个zip下载</p>
<p><img src="/images/assets/9fb1300e8f02ca4bd6da0dff842bd70fdebe9ce9.png" alt="图5"></p>
</li>
</ul>
</li>
<li><p>解压，进入wars目录，会发现里面有如下几个war文件</p>
<p> <img src="/images/assets/213eb2b75843171fd00345a59d7b5e926ec492ca.png" alt="图6"></p>
</li>
<li><p>将这几个war文件复制并粘贴到你的tomcat的webapps目录下，再启动你的tomcat<br>tips：tomcat是你的安装目录，自己找找，如何启动tomcat，一般情况下打开命令行提示符，输入startup.bat就可启动，或者自己进入bin目录启动</p>
</li>
<li><p>启动后你会发现webapps目录下，多了5个war对应的文件夹</p>
<p><img src="/images/assets/e6dbfc1c8ef1859d57880aa30994a9f76c9806bc.png" alt="图7"></p>
</li>
<li><p>这个时候，没意外的话，在浏览器输入<a href="">http://localhost:8080/flowable-modele</a>r就会出现下面的界面，账号admin密码test</p>
</li>
<li><p><img src="/images/assets/55e93c7be27e5cffd0013272fc1902a0d17b4071.png" alt="图8"></p>
</li>
</ul>
<p>                登录后：            <img src="/images/assets/8eed4da64744eeeb2c823d3e281c3aa6e7aa5f2b.png" alt="图9"></p>
<ul>
<li><p>创建流程图</p>
<ul>
<li><p>点击蓝色按钮：Create Process 进入新界面，按照需求填入名称和key（key代表你这个流程的名字，在数据库中比较重要）<br><img src="/images/assets/36b9dae5143b1538d46996cc767e72fd91f164c8.png" alt="图10"></p>
</li>
<li><p>Create new model进入新界面<br><img src="/images/assets/6a32d1f483890af19e98d6547dca127638a28b19.png" alt="图11"></p>
</li>
<li><p>画图</p>
<ul>
<li><p>你需要一些流程图的知识，我这边建议你是看视频教程，因为我这个是简易使用，不详细说了。</p>
</li>
<li><p>常用组件：并行网关、usertask等</p>
</li>
<li><p>画完控件后，需要设置每个组件的一些属性，比如说这个usertask的id，assignments等</p>
</li>
<li><p>最后左上角保存</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>下载流程图</p>
<ul>
<li><p>在主页面，点击进入刚刚画好的图</p>
</li>
<li><p>右上角有个下载按钮，下载即可<br><img src="/images/assets/729201fefc1dfc63c60d3bd60894dd4b4709563f.png" alt="图12"></p>
</li>
<li><p>将下载好的xml文件放入工程resources目录下的processes目录中，重启工程即可</p>
</li>
</ul>
</li>
</ul>
<h3 id="5、启动流程和创建流程实例"><a href="#5、启动流程和创建流程实例" class="headerlink" title="5、启动流程和创建流程实例"></a>5、启动流程和创建流程实例</h3><p>    当你看到表act_ge_bytearray、act_re_procdef可以看到你流程图的key，则证明流程图已经存入数据库中，接下来就是启动流程了。</p>
<p>    这里我们需要了解的知识是：流程定义、流程实例、任务……举个例子，我们正在开发绩效申请，那绩效申请就是一个流程定义（顾名思义：定义一个流程，这流程里面有多个步骤，比如提出申请、审批等）；当不同员工去申请绩效，那一个员工申请就是一个流程实例；当我们启动了这个流程实例，我们的流程开始走下去了，比如说到了申请这一步，那此时就是一个任务task，申请后需要审批，则审批这个也是一个task；</p>
<p>    用数量关系来形容就是：一个流程定义可以有多个流程实例，一个流程实例可以有多个任务。</p>
<ul>
<li><p>在测试用例中，创建流程实例</p>
<ul>
<li><p>```java<br>//process与流程有关<br>@Autowired<br>RuntimeService runtimeService;</p>
<p>@Test<br>void test(){</p>
<pre><code>ProcessInstance processInstance=runtimeService.startProcessInstanceId(&quot;这里是流程定义的key值，也就是画图中提到的key&quot;);
if(processInstance!=null)&#123;
    System.out.println(&quot;流程实例id：&quot;+processInstance.getProcessInstanceId());
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  - 如果上述有打印出来，则说明创建成功</span><br><span class="line"></span><br><span class="line">- 查看待办任务</span><br><span class="line">  </span><br><span class="line">  - ```java</span><br><span class="line">    //查看运行任务使用TaskService </span><br><span class="line">    //instanceId就是上面的流程实例id</span><br><span class="line">    @Autowired</span><br><span class="line">    TaskService taskService;</span><br><span class="line">    </span><br><span class="line">    void test1(String instanceId)&#123;</span><br><span class="line">        List&lt;Task&gt; tasks=taskService.createTaskQuery()</span><br><span class="line">                    .processInstanceId(instanceId)</span><br><span class="line">                    .list();</span><br><span class="line">    </span><br><span class="line">        for(task:tasks)&#123;</span><br><span class="line">            System.out.println(task.getId());</span><br><span class="line">            System.out.println(task.getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>正常情况下，可以打印出taskId和name；我个人就是将这个taskId和instanceId与业务流程结合。</p>
</li>
</ul>
</li>
<li><p>完成任务</p>
<ul>
<li>```java<br>@Autowired<br>TaskService taskService;void test2(String taskId){<pre><code>Task task = taskService.createTaskQuery()
            .taskId(taskId)
            .singleResult();
if (task!=null)&#123;
    taskService.complete(taskId);
&#125;
</code></pre>
}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 完成任务后，此时再调用一次test1，会发现待办任务不一样，可以理解为员工提交申请绩效，现在流程进入下一步了。</span><br><span class="line"></span><br><span class="line">- 驳回任务</span><br><span class="line">  </span><br><span class="line">  - 正常的业务场景中，我们知道如果审批不通过，就会被驳回，这个时候我们就要控制流程回到某一步。</span><br><span class="line">  </span><br><span class="line">  - 但流程多种多样，有并行的，也有串行的，所以使用的方法也是不一样的。</span><br><span class="line">    </span><br><span class="line">    ![图13](/images/assets/906ee21fef33f3e0b551b3805a605135049ebbfe.png)</span><br><span class="line">    </span><br><span class="line">    - D-&gt;B：</span><br><span class="line">      </span><br><span class="line">      - 这种是最简单的，key值一般可以在你的流程图里看到</span><br><span class="line">      </span><br><span class="line">      - ```java</span><br><span class="line">        //processInstanceId：流程实例id，taskDefinitionKey:D流程的id，goalKey：目的流程的id，也就是B的id</span><br><span class="line">        runtimeService.createChangeActivityStateBuilder()</span><br><span class="line">                        .processInstanceId(processInstanceId)</span><br><span class="line">                        .moveActivityIdTo(taskDefinitionKey,goalKey)</span><br><span class="line">                        .changeState();</span><br></pre></td></tr></table></figure>

<ul>
<li>C-&gt;A（并行分支回到A）或者E-&gt;B、C：<ul>
<li><p>退回到并行网关，先获取当前正在运行的执行任务id，注意：execution和一般的task是不一样的</p>
</li>
<li><pre><code class="java">//获取当前正在的执行任务列表，注意目的流程id（E-&gt;B、C）是第一个并行网关的id
List&lt;Execution&gt; list = runtimeService.createExecutionQuery()
                .parentId(proInstanceId)
                .list();

        List&lt;String&gt; list1 = new ArrayList&lt;&gt;();
        for (Execution execution : list) &#123;
            System.out.println(&quot;当前运行的任务key：&quot;+execution.getActivityId());
            System.out.println(&quot;当前任务id：&quot;+execution.getId());
            list1.add(execution.getId());
        &#125;

        //当前执行任务回到某个步骤
        runtimeService.createChangeActivityStateBuilder()
                .processInstanceId(proInstanceId)
                .moveExecutionsToSingleActivityId(list1,&quot;目的流程id&quot;)
                .changeState();
</code></pre>
</li>
<li><p>为什么要选用execution？因为并行流程中，退回是需要两条分线的最新流程id同时退回到目的key处，假设任务C完成后，当前task列表不存在C了，只有正在运行的B或D，如果要返回至A，但无法获取C的流程id，这样就无法正常退回到A，就算退回成功了，也可能是出错的。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6、总结"><a href="#6、总结" class="headerlink" title="6、总结"></a>6、总结</h3><p>    以上是springboot+flowable的简单使用，其实踩了非常多的坑，有空再记录一下这些坑，还有分配任务负责人也是很常用的一个功能！还有好多flowable的功能还没挖掘，现在也只是按需简单使用，比如说flowable是结合了spring security，说实话我到现在还是搞不懂它的原理，想想就头疼；视频里很多都是将如何使用它们，但其实你要做的是如何将flowable融入到你的工程中，配合你的业务流程一起使用，就好比 绩效申请中，经理审批通过，此时我们就会调用审批通过的接口，审批的接口调用业务层（serviceImpl）就要先写你的业务代码，然后再调用到flowable的流程控制，也就是完成了当前流程实例审批的这个任务。这也算是我自己摸索出来的，可能耦合度会高一点，希望后续可以找到开源项目的代码去研究。</p>
<p>有问题可联系: <mark><a href="mailto:&#109;&#x69;&#117;&#x63;&#117;&#110;&#108;&#x65;&#x65;&#x40;&#x67;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#109;&#x69;&#117;&#x63;&#117;&#110;&#108;&#x65;&#x65;&#x40;&#x67;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></mark></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2022/01/22/%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%9320220101-20220122/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/22/%E4%B8%89%E5%91%A8%E6%80%BB%E7%BB%9320220101-20220122/" class="post-title-link" itemprop="url">三周总结20220101-20220122</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-22 20:34:02" itemprop="dateCreated datePublished" datetime="2022-01-22T20:34:02+08:00">2022-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-23 00:51:28" itemprop="dateModified" datetime="2022-01-23T00:51:28+08:00">2022-01-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前言：好久没写总结了，距离上次写竟然20天了；因为前半段时间都在做着非开发的事情，但偶尔会兼顾一下开发，遇到的问题其实一直都有做记录的，只是没时间总结在一起而已！！因为转换成Ubuntu了，所以新系统又要重新下载很多很多东西，比如说git，npm，node，java jdk和jre等等，今天一整个下午都在弄这个，还是很不熟悉文件系统，总是会思考代码工作目录应该放在哪个目录呢，会不会全部系统默认安装导致类似的window那样c盘爆满（linux是文件系统哦，好像也不会出现这么尴尬的事情，额好吧还是不太清楚）</p>
<p><strong>一、关于使用HashMap无法获取值为null的字段</strong></p>
<p>后端开发（Springboot，mybatis），在编写xml文件时，返回的类型是HashMap，但是数据库中有存在null值的字段，导致返回的结果没有该字段。</p>
<p>解决方法：配置application.properties文件中添加该行即可</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mybatis.configuration.call-setters-on-nulls</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p><strong>二、mybatis sql语句写错出现的bug</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.jdbc.BadSqlGrammarException:</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;values</span></span></span><br><span class="line">        (&#x27;xxx&#x27;,&#x27;xxxx&#x27;,&#x27;xxx&#x27;,xxx.&#x27; at line 5</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error may exist in file xxxxxx</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error may involve xxxxx.addCollectionMapper-Inline</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error occurred while setting parameters</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## SQL: insert into performance_collection  (xxxx) values   (xxxxx);</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;values</span></span></span><br><span class="line">        (&#x27;xxx&#x27;,&#x27;xxxx&#x27;,&#x27;xxx&#x27;,xxx.&#x27; at line 5</span><br><span class="line">; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;values</span><br><span class="line">        (&#x27;xxx&#x27;,&#x27;xxxx&#x27;,&#x27;xxx&#x27;,xxx.&#x27; at line 5</span><br><span class="line"></span><br><span class="line">    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)</span><br><span class="line">    at</span><br><span class="line">    ....</span><br></pre></td></tr></table></figure>

<p><em>原因：</em> 就是xml文件中的sql语句写错了，要很细心去看！！我这里就是少了一个括号，吐血！</p>
<p><strong>三、mybatis中sql语句动态注入</strong></p>
<p>场景：我有四个表的结构是一模一样的，只是因为业务原因需要将数据分开存储，但是在编写xml中不想写四次语句，这样子的代码不利于复用，上网找了很久的解决方法，参考了这篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_46660780/article/details/109176066">mybatis插入动态表名_MrYshen的博客-CSDN博客_mybatis 动态插入表</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">parameterTypes</span>=<span class="string">&quot;java.lang.String&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">insert</span> <span class="attr">into</span> $&#123;广义表名&#125; () <span class="attr">values</span> ()</span></span><br><span class="line"><span class="tag">&lt;/<span class="attr">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>广义表名就是通过外部传入值，但是${}这种方式好像是不安全的，还有待考究！</p>
<p>四、关于出现Raw use of parameterized class ‘HashMap’的问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> Inspection info: Reports any uses of parameterized classes where the type parameters are omitted. Such raw uses of parameterized types are valid in Java, but defeat the purpose of using type parameters, and may mask bugs. This inspection mirrors the rawtypes warning of javac.</span><br></pre></td></tr></table></figure>

<p>情景：返回类型是List&lt; HashMap &gt;时出现的警告，&lt;&gt;里面是泛型，故不能这么写，改为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;HashMap&lt;String,Object&gt;&gt; getList();</span><br></pre></td></tr></table></figure>

<p><strong>五、关于更换电脑或系统时deploy hexo时出现的问题</strong></p>
<p>在我满怀期待以为码完这篇总结就可以摊着玩手机时，出现了这个问题：</p>
<p><img src="/images/assets/ac894cfbbf01dc240c2f9c2eb2d0461b6f00b347.png" alt="图0"></p>
<p>我就知道推送的时候肯定会出现什么毛病，关键词 publickey，对的，github仓库需要添加新的ssh公钥，如何在linux系统生成ssh公钥呢，于是参考了这篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013687821/article/details/41861927">在ubuntu系统上生成SSH密钥，并把对应的公开密钥添加到GitHub账户_若要走的专栏-CSDN博客_ubuntu生成ssh密钥</a></p>
<p>按照步骤完全是可以搞定的哦，最后deploy一下果然成功了，故回来再次记录一下;</p>
<p>但是图片相对路径这里弄了好久，如下图：</p>
<p><img src="/images/assets/dc94c70964420cff91783cfeed441ee4cb1576ff.png" alt="图1"></p>
<p><img src="/images/assets/4092c7b09c3d9582f887554355d69d0fd37f41ea.png" alt="图2"></p>
<p>但是我的文件夹名字变成了这样：</p>
<p><img src="/images/assets/ad1ff94d8daa709d70d401abf89d3ecd49a26740.png" alt="图3"></p>
<p>很明显这不是我想要的，原来使用的Typora它是可以根据${filename}获取到目录名字，显然这里不是很智能？我去marktext的issue里查看了一下，这个问题似乎还没被解决</p>
<p><strong>最后</strong> 唠嗑一下，这篇文章是使用Markext的软件来写的，还是不太熟悉配置，还是全英文唉。以上的都是最近在做接口开发时遇到的小问题，虽然问题不大，但当写代码写到头晕眼花时，这些还挺让人心烦的啧，希望过年前可以搞定。吐槽一下，为什么Linux向日葵不能复制粘贴啊！！有毒！下次有空的话打算看看能不能添加一个评论功能。</p>
<p>有什么错误或问题可以邮箱联系: <a href="mailto:&#109;&#105;&#117;&#99;&#117;&#x6e;&#108;&#101;&#101;&#x40;&#103;&#109;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;">&#109;&#105;&#117;&#99;&#117;&#x6e;&#108;&#101;&#101;&#x40;&#103;&#109;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2021/12/27/%E4%B8%A4%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%9320211220-20211231/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/27/%E4%B8%A4%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%9320211220-20211231/" class="post-title-link" itemprop="url">两周小总结20211220-20211231</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-27 21:01:47" itemprop="dateCreated datePublished" datetime="2021-12-27T21:01:47+08:00">2021-12-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-23 00:32:42" itemprop="dateModified" datetime="2022-01-23T00:32:42+08:00">2022-01-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前言：这两周基本上都没有做开发的事情，所以没怎么遇到开发的问题，但闲的时候有浏览一下技术类的小文章，看到了比较有趣的算法题及其思路；写这篇小总结的时候已经是2022年的元旦了，年终总结还没写，唉；不过新的一年，给自己送的新年礼物是Linux系统，导致1号凌晨4点才睡….</p>
<p><strong>一、算法题</strong></p>
<p>问题：你有2颗鸡蛋，需要以最少的尝试次数来判断在100层的高楼上，哪一层楼是鸡蛋的安全层（低于该层鸡蛋不会摔碎，高于该层都会摔碎），假设没有摔碎的鸡蛋可以重复使用，每颗鸡蛋的坚硬程度都是相同的。</p>
<p><em>1、初始思路</em></p>
<p>从低往高一层一层试，这应该是最简单的思路；当然，耗时也很多，浪费一颗鸡蛋。</p>
<ul>
<li><p>最好情况：1次</p>
</li>
<li><p>最坏情况：100次</p>
</li>
</ul>
<p><strong>后面的几种思路都是看到文章提供的；</strong></p>
<p><em>2、二分法思路</em></p>
<p>从中间扔下去，若不碎，可以继续从第75层试…</p>
<p>若碎了，回到方法一</p>
<ul>
<li><p>最好情况：2次</p>
</li>
<li><p>最坏情况：50次</p>
</li>
</ul>
<p><em>3、均衡切割</em></p>
<p>将100层切分成若干各区域，一颗鸡蛋用于确定区域，另一颗鸡蛋用于确定楼层；</p>
<p>假若均分为10个区域，测试者从低往高，每10层扔一个鸡蛋，若鸡蛋破碎，则在该区域从低往高继续测试；</p>
<ul>
<li>最优：2次（NO.1）</li>
<li>最坏：19次（NO.100）</li>
</ul>
<p><em>4、第三种思路的改良</em></p>
<p>最终的测试次数，高楼层区域总是会比低楼层区域多，因为在定位区域时是从低往高测试，例：NO.18与NO.98层的测试次数。=&gt;区块完全均匀划分对大数不利。</p>
<p>解决：低楼层区域，楼层范围扩大；高楼层区域所含楼层减少。用第二颗鸡蛋尝试次数的减少来弥补第一颗鸡蛋需要尝试次数的递增。</p>
<p>每上一个区域，第一颗鸡蛋消耗的次数+1，因此可以让每个区块包含的楼层数逐级-1；</p>
<p>若第一区域有n层，则第二区域有n-1层……第n个区域1层</p>
<p>n+(n-1)+(n-2)+…+4+3+2+1&gt;=100</p>
<p>得n最小值是14，测试总次数不会超过14次。</p>
<hr>
<p>当然，以上只是数学思维，不考虑实际。这里也只是记录一下我看到的算法题。悄咪咪看了评论还是有好多方法，瞄到有位大哥认为二分法更容易；因为之前备研有准备过数据结构这门课，感觉这里的解决思路倒是比较像查找那一章：顺序查找，二分查找……忽然间有感而发，原来之前一直在学习的知识会在某个地方会运用到，果然还是要多学习。</p>
<p><strong>二、安装Linux系统</strong></p>
<p>准备工作大概一个星期，浏览如何在自己的老电脑上安装双系统，如何分区比较好，跑去各个网站看视频看博客，最后决定将Linux系统安装在移动固态硬盘，因为老电脑的硬盘是HDD，再分一些空间给Linux的话，大概会卡到运行不了。Linux多个发行版本，权衡之下选择Ubuntu。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--硬件清单</span><br><span class="line">-cpu Intel(R) Core(TM) i5-6200U CPU @ 2.30GHz</span><br><span class="line">-RAM 4G+8G</span><br><span class="line">-type 64位</span><br><span class="line">-ssd samsung portable ssd T5 500G</span><br><span class="line">-空u盘 32G</span><br><span class="line"></span><br><span class="line">--软件清单</span><br><span class="line">- rufus-3.17</span><br><span class="line">- ubuntu-18.04.6-desktop-amd64.iso</span><br></pre></td></tr></table></figure>

<p>硬件其实只需准备一个移动SSD+U盘，软件准备Ubuntu镜像文件和rufus；SSD将分配240G给Linux。</p>
<p><em>1、下载所需的软件</em></p>
<p>U盘一定是空的！而且是FAT32！然后rufus将Ubuntu镜像文件录入u盘中即可；</p>
<p><em>2、ssd分区</em></p>
<p>因为是新买的ssd，所以刚打开时就是一个主分区，当时还迷惑为什么不能压缩卷……后来参考了许多文章，原来要先删除卷，再新建。先给Ubuntu的240G分一个区，剩下的再分一个区；再将Ubuntu那个区删了，使之变成未分配的状态（不删的话等着重新登回window再分区吧，别问我为什么，因为鄙人就这么踩坑了，导致后面更多bug了，本来老电脑的window就慢了）。</p>
<p><em>3、安装Ubuntu</em></p>
<p>同时插入U盘和移动ssd，关闭电脑-&gt;重新开机-&gt;进入BIOS系统（我的是惠普电脑，疯狂按F10）-&gt;修改启动选项顺序，u盘或硬盘在前-&gt;进入Ubuntu安装引导页面啦！</p>
<p>安装的教程很多，自行查看就可以了；注意分区的时候选择自定义，别选默认或者抹除（如果你打算只装一个Linux的话可以这么选）；</p>
<p>我的分区（记不清了，好像是这样的）：</p>
<ul>
<li>efi 逻辑分区 400M</li>
<li>/swap 逻辑分区 12G （因为我的内存是12G）</li>
<li>/   ext4 主分区 100G</li>
<li>/home ext4 主分区 剩下的都是它的</li>
</ul>
<p>然后等待一段时间就安装完成了，重新启动即可；</p>
<p>注意重新启动的时候要拔掉U盘，然后将Ubuntu引导程序设为window的前面；</p>
<p><em>4、安装过程中的坑</em></p>
<p>（1）ssd分区后，分给Linux的忘记将它变回未分配状态，导致在安装Linux时，又要中断安装打开window操作。</p>
<p>（2）重新分区后，再次重新安装，启动电脑出现新的问题：</p>
<p><img src="../images/%E4%B8%A4%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%9320211220-20211231/%E5%9D%911-1641053396447.png" alt="坑1"></p>
<p>大概是找不到目录下的这个文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--解决方法</span><br><span class="line">将启动U盘中 /EFI/BOOT/gxxx.EFI（名字我忘了，g开头的）改为mmx64.EFI即可</span><br></pre></td></tr></table></figure>

<p>（3）解决完坑2后，又有新的问题出现：</p>
<p><img src="../images/%E4%B8%A4%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%9320211220-20211231/%E5%9D%912.png" alt="坑2"></p>
<p>？？？？无效签名？需要加载内核？之前不是才可以吗？忽然间想起之前学过的操作系统这门课，访问内核好像是需要安全权限的，猜测是这个原因。上网一搜，让我关掉安全模式，记得安装完后重新开回安全模式；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--解决方法</span><br><span class="line">进入BIOS禁用安全模式即可</span><br></pre></td></tr></table></figure>

<p>(4)系统已经成功安装完了，也可以正常用了；但我拔掉ssd后，重新开机，出现新问题，连window都开不了了！</p>
<p><img src="../images/%E4%B8%A4%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%9320211220-20211231/%E5%9D%913.png" alt="坑3"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--解决方法</span><br><span class="line">将window引导程序设回在Ubuntu前面，或者插回ssd，Ubuntu引导程序中选择window登录</span><br></pre></td></tr></table></figure>

<p>出现这种情况的原因是：我的Ubuntu引导程序是安装在ssd中，然后现在拔掉了，启动顺序又是Ubuntu先，自然就会出现这样的问题。</p>
<p><strong>小结</strong></p>
<p>因为基本上是第一次操作Linux系统，基本小白一个，连中文输入法都安装不了…捣鼓着就3点了，再看了会手机，好家伙4点了。只能第二天起床再捣鼓，成功弄了中文输入法，也安装了科学上网的软件，打算再学一下shell命令等再将开发编辑器下载到系统中；使用感受：果然固态硬盘还是快，不知道是因为硬盘的原因还是系统的原因，连科学上网的速度都快了。好的，新年礼物收到了！新年快乐哦~又新的一天了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2021/12/18/%E4%B8%80%E5%91%A8%E5%B0%8F%E7%BB%9320211213-20211219/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/18/%E4%B8%80%E5%91%A8%E5%B0%8F%E7%BB%9320211213-20211219/" class="post-title-link" itemprop="url">一周小结20211213-20211219</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-18 22:35:09" itemprop="dateCreated datePublished" datetime="2021-12-18T22:35:09+08:00">2021-12-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-23 00:32:15" itemprop="dateModified" datetime="2022-01-23T00:32:15+08:00">2022-01-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>吐槽：这一周忽然间任务就堆积过来了，希望月底前可以弄完项目吧~</p>
<p><strong>一、关于Springboot+pageHelper由于版本问题引起的bug：Is there an unresolvable circular reference</strong></p>
<p><em>1、bug流程</em></p>
<p>项目中要用到分页查询的功能，不想在前端做分页因此决定在后端做分页，之前项目是有做过分页查询的，于是就直接复制代码过去这次的项目。事情肯定没这么简单，在测试的时候出现美丽的红色(格式不会调…好丑)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.springframework.beans.factory.BeanCreationException: Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name <span class="string">&#x27;com.github.pagehelper.autoconfigure.PageHelperAutoConfiguration&#x27;</span>: Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name <span class="string">&#x27;com.github.pagehelper.autoconfigure.PageHelperAutoConfiguration&#x27;</span>: Requested bean is currently <span class="keyword">in</span> creation: Is there an unresolvable circular reference?</span><br><span class="line">    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:160)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean<span class="variable">$0</span>(AbstractBeanFactory.java:335)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944)</span><br><span class="line">    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)</span><br><span class="line">    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)</span><br><span class="line">    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)</span><br><span class="line">    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)</span><br><span class="line">    at org.springframework.boot.SpringApplication.run(SpringApplication.java:302)</span><br><span class="line">    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)</span><br><span class="line">    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)</span><br><span class="line">    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)</span><br><span class="line">    ... 69 more</span><br><span class="line">Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name <span class="string">&#x27;com.github.pagehelper.autoconfigure.PageHelperAutoConfiguration&#x27;</span>: Requested bean is currently <span class="keyword">in</span> creation: Is there an unresolvable circular reference?</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)</span><br><span class="line">    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean<span class="variable">$0</span>(AbstractBeanFactory.java:335)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassEnhancer<span class="variable">$BeanMethodInterceptor</span>.resolveBeanReference(ConfigurationClassEnhancer.java:362)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassEnhancer<span class="variable">$BeanMethodInterceptor</span>.intercept(ConfigurationClassEnhancer.java:334)</span><br><span class="line">    at com.github.pagehelper.autoconfigure.PageHelperAutoConfiguration$$EnhancerBySpringCGLIB$<span class="variable">$774ffedf</span>.pageHelperProperties(&lt;generated&gt;)</span><br><span class="line">    at com.github.pagehelper.autoconfigure.PageHelperAutoConfiguration.addPageInterceptor(PageHelperAutoConfiguration.java:75)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">    at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor<span class="variable">$LifecycleElement</span>.invoke(InitDestroyAnnotationBeanPostProcessor.java:389)</span><br><span class="line">    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor<span class="variable">$LifecycleMetadata</span>.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:333)</span><br><span class="line">    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:157)</span><br><span class="line">    ... 86 more</span><br></pre></td></tr></table></figure>

<p>老实说我懵了，Is there an unresolvable circular reference–循环注入？不是复制过来的吗？难道是版本的原因？</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pageHelper版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>于是把version注释了，让版本自动生成，但是在码分页代码时，PageHelper包引用出错了….</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageHelper.startPage(pageNum,pageSize);</span><br></pre></td></tr></table></figure>

<p>是插件有问题吗？上网搜，有博主说是：猜测pageHelper.jar版本与MyBatis版本不兼容。但看了两个项目，mybatis都是2.2.0。</p>
<p>接着又去了maven仓库找，见到有两个分页插件，就尝试了另外一个插件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>好家伙，没有报错了！后面测试，好样的，没有错误！！！就是分页没有起效果罢了，呵呵c！</p>
<p>难道是我使用的方法不对？我又去翻度娘，这个插件似乎要在启动类那里添加配置，经测试，失败。</p>
<p>有人说要把两个插件同时放入xml文件，测试后，失败，还是会出现刚开始的错误。</p>
<p>乏了~</p>
<p>兜兜转转回到原来的错误，那应该还是版本的问题，既然不是和mybatis版本有冲突，难道是和springboot版本有冲突？查看了两个项目的springboot的版本，果然，旧项目是2.5.5，新项目是2.6.0。果断更改，再测试，还是出错了，但是另外一个错误(只要看SQL: select * from a ; LIMIT ?即可)：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.jdbc.BadSqlGrammarException: </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Error querying database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;LIMIT 15&#x27; at line 1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error may exist in file [这里隐藏目录哈]</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error may involve defaultParameterMap</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The error occurred while setting parameters</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## SQL: select * from a ; LIMIT ?</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;LIMIT 15&#x27; at line 1</span></span></span><br><span class="line">; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;LIMIT 15&#x27; at line 1</span><br><span class="line"></span><br><span class="line">    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)</span><br><span class="line">    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)</span><br><span class="line">    at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)</span><br><span class="line">    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)</span><br><span class="line">    at com.sun.proxy.$Proxy67.selectList(Unknown Source)</span><br><span class="line">    at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)</span><br><span class="line">    at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)</span><br><span class="line">    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)</span><br><span class="line">    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)</span><br><span class="line">    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)</span><br><span class="line">    at com.sun.proxy.$Proxy68.getInformation(Unknown Source)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">    at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)</span><br><span class="line">    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)</span><br><span class="line">    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)</span><br><span class="line">    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)</span><br><span class="line">    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class="line">    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)</span><br><span class="line">    at com.sun.proxy.$Proxy69.getInformation(Unknown Source)</span><br><span class="line">    at com.zsshky.servive.impl.InformationServiceImpl.getAllInformationByPage(InformationServiceImpl.java:24)</span><br><span class="line">    at com.zsshky.ProjectNoise105ApplicationTests.contextLoads(ProjectNoise105ApplicationTests.java:56)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">    at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)</span><br><span class="line">    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)</span><br><span class="line">    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)</span><br><span class="line">    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)</span><br><span class="line">    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)</span><br><span class="line">    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)</span><br><span class="line">    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)</span><br><span class="line">    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)</span><br><span class="line">    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)</span><br><span class="line">    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)</span><br><span class="line">    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)</span><br><span class="line">    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)</span><br><span class="line">    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)</span><br><span class="line">    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)</span><br><span class="line">    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)</span><br><span class="line">    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)</span><br><span class="line">    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)</span><br><span class="line">    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)</span><br><span class="line">    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)</span><br><span class="line">    .....</span><br></pre></td></tr></table></figure>

<p>就是xml中的sql语句多写了个分号！！！！当时太累了，以为还是没有解决。后面再兜了10分钟，终于看清错误了！这里感谢这位博主，那十分钟就是兜去这里确认了原解决方法没有问题。</p>
<p>文章链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/layonly/article/details/121436957">https://blog.csdn.net/layonly/article/details/121436957</a></p>
<p><strong>总结：</strong>springboot 2.6.0版本会与pageHelper起冲突，还有mapper.xml里面mysql语句分号问题。</p>
<p><strong>二、关于在xml文件Mysql语句中条件有大于或小于时应如何写</strong></p>
<p>有查询数据库时需要用到大于或小于某个条件，直接用navicat里写没什么问题，但在xml时不能直接写&gt;、&lt;。</p>
<p>解决：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- where 后的条件使用如下的形式--&gt;</span></span><br><span class="line">where &lt;![CDATA[你的条件]]&gt;</span><br></pre></td></tr></table></figure>

<p>经测试，木有问题。</p>
<p><strong>一周小结：</strong>这一周花了些时间在excel处理中还有其他的事情中，所以写代码的时间少了，总结暂时到此，若明天周日还有，将继续补充。</p>
<p>有什么错误或问题可以邮箱联系: <a href="mailto:&#109;&#x69;&#x75;&#99;&#x75;&#x6e;&#108;&#x65;&#x65;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#x6f;&#109;">&#109;&#x69;&#x75;&#99;&#x75;&#x6e;&#108;&#x65;&#x65;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#x6f;&#109;</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2021/12/12/%E4%B8%80%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/12/%E4%B8%80%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">一周小总结20211206-20211212</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-12 22:48:25" itemprop="dateCreated datePublished" datetime="2021-12-12T22:48:25+08:00">2021-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-18 23:32:13" itemprop="dateModified" datetime="2021-12-18T23:32:13+08:00">2021-12-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>一、关于gson的使用</strong></p>
<p><em>1、前言</em></p>
<p>​    首先项目使用的是Uniapp+Springboot；在上一次的项目开发中，前端传递较复杂的Json格式的数据，然后在后端获取数据时踩了几次坑。（后端是通过gson来解析json格式的数据，接口参数是String类型）。数据格式经常如下图：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: <span class="string">&quot;aaa&quot;</span>,</span><br><span class="line">    sex: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    birth: <span class="string">&quot;1997-01-01&quot;</span>,</span><br><span class="line">    favorite_book:[</span><br><span class="line">        &#123;</span><br><span class="line">            book_name: <span class="string">&quot;骆驼祥子&quot;</span>,</span><br><span class="line">            author: <span class="string">&quot;老舍&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            book_name: <span class="string">&quot;假如给我三天光明&quot;</span>,</span><br><span class="line">            author: <span class="string">&quot;海伦·凯勒&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    虽然后端接收到的是String类型的字符串，但它依旧是Json格式的，因此需要转换；当时是有两个pojo类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Person类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String birth;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Book类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String book_name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    如何将收到的数据转化成一个个类，再存进数据库中呢？当时使用的是如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//info就是Json格式的字符串，from前端</span></span><br><span class="line">Person person=<span class="keyword">new</span> Gson().fromJson(info, Person.class);</span><br><span class="line">Map map=<span class="keyword">new</span> Gson().fromJson(info, Map.class);</span><br><span class="line">List l=(ArrayList)map.get(<span class="string">&quot;favorite_book&quot;</span>);</span><br><span class="line">List&lt;Book&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j&lt;l.size();j++)&#123;</span><br><span class="line">	String JsonString = <span class="keyword">new</span> Gson().toJson(l.get(j));</span><br><span class="line">    Account acc =  <span class="keyword">new</span> Gson().fromJson(JsonString, Book.class);</span><br><span class="line">    list.add(acc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    实不相瞒，这是出现bug后师傅帮修正的方法，我原来的想法是使用TypeToken的方法，快速便捷：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Book&gt; expenditureInfoList = <span class="keyword">new</span> Gson().fromJson(info, <span class="keyword">new</span> TypeToken&lt;List&lt;Book&gt;&gt;() &#123;&#125;.getType());</span><br></pre></td></tr></table></figure>

<p>​    是的，我是傻子，很明显出错，fromJson的第一个参数不应该是info，应该是Array格式的String字符串或者其他。如何获取info中的favorite_book呢？我使用了超级麻烦的办法，将Map又转回String类型，再使用一次这个方法，但是bug来了，若某个值为null时，转换就会有bug出现。上一个项目太赶了，没时间想，试了很多种方法的失败，于是就放弃了；</p>
<p><em>2、gson使用</em></p>
<p>​    新项目，刚好今天周末，趁着有空顺便在写代码的时候，稍微看了看json的部分知识，其实我只需要将String转回JsonObject类型就可以获取favorite_book啦，抱着这样的想法，发现果然，gson有这样的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将Json格式的字符串info转成JsonObject</span></span><br><span class="line">JsonObject jsonObject = <span class="keyword">new</span> JsonParser().parse(info).getAsJsonObject();</span><br><span class="line"><span class="comment">//获取favorite_book</span></span><br><span class="line">JsonElement favorite_books = jsonObject.get(<span class="string">&quot;favorite_book&quot;</span>);</span><br><span class="line"><span class="comment">//将JsonElement格式转换为List,fromJson第一个参数可以是JsonElement的格式！！</span></span><br><span class="line">List&lt;Book&gt; bookList = <span class="keyword">new</span> Gson().fromJson(favorite_books, <span class="keyword">new</span> TypeToken&lt;List&lt;Book&gt;&gt;() &#123;&#125;.getType());</span><br></pre></td></tr></table></figure>

<p>​    是的，这样就可以获得List了，为啥当时的自己没有静下心看。初次测试是木有问题，若是后续有问题，再回来补坑了。如果想单独获取name呢？很简单，gson提供转换类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取name，若是int类型，则是getAsInt().....</span></span><br><span class="line">String name = jsonObject.get(<span class="string">&quot;name&quot;</span>).getAsString();</span><br></pre></td></tr></table></figure>

<p><em>3、小结</em></p>
<p>​    项目前端是一个表单，师傅建议是一个一个参数传，这样子的确不会出错，但我还是想偷懒，想直接Json格式字符串搞定。果然硬啃一下还是好的。如果有出错再说吧，感觉也需要去认真看看Json的知识了，感觉只是了解了皮毛。</p>
<p><strong>二、关于postman的使用</strong></p>
<p><em>1、使用postman传递Json格式的数据</em></p>
<p>​    这是在测试引发的小问题，对的，我真的可以称为坑王，哪里有坑就里面跳。先记录一下如何使用postman传递Json格式的数据。如图：</p>
<p><img src="/images/%E4%B8%80%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%93/image-20211212234244284-1639325114783.png" alt="image-20211212234244284"></p>
<p><img src="/images/%E4%B8%80%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%93/image-20211212234320441-1639325126553.png" alt="image-20211212234320441"></p>
<p><img src="/images/%E4%B8%80%E5%91%A8%E5%B0%8F%E6%80%BB%E7%BB%93/image-20211212234413117-1639325143299.png" alt="image-20211212234413117"></p>
<p>（1）初坑</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 7 path $</span><br></pre></td></tr></table></figure>

<p>原因：json格式写错，我多写了一个info，看下面秒懂</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">info&#123;</span><br><span class="line">    name: <span class="string">&quot;aaa&quot;</span>,</span><br><span class="line">    sex: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    birth: <span class="string">&quot;1997-01-01&quot;</span>,</span><br><span class="line">    favorite_book:[</span><br><span class="line">        &#123;</span><br><span class="line">            book_name: <span class="string">&quot;骆驼祥子&quot;</span>,</span><br><span class="line">            author: <span class="string">&quot;老舍&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            book_name: <span class="string">&quot;假如给我三天光明&quot;</span>,</span><br><span class="line">            author: <span class="string">&quot;海伦·凯勒&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）二坑</p>
<p>还是Json数据写错，比如book_name写成了bookName等，可能就会出现null的错误提示，有些时候可能还会不出现错误！就比如项目中，有个recordId是通过UUID自动生成的，如果json数据传递为record_id:”xxxx”，则recordId没有从前端获得值，但是会自己生成！当我需要通过根据recordId更新记录时，就会出现更新不成功的现象，当时的我还以为是sql语句的问题….测试的时候明明没错。</p>
<p><strong>三、关于toString和StringOf的用法</strong></p>
<p><em>1、toString()</em></p>
<p>​    在使用的时候，若值为null的话，是会出错的哦！如果本身值就为null的话需要注意了</p>
<p><em>2、StringOf()</em></p>
<p>​    会将null转为字符串的“null”！！！！</p>
<p><strong>以上就是本周的小结，好像还有一些忘记了，果然有什么要总结的，要及时记录</strong></p>
<p>有什么错误或问题可以邮箱联系: <a href="mailto:&#109;&#105;&#117;&#99;&#x75;&#110;&#x6c;&#x65;&#101;&#x40;&#103;&#109;&#97;&#x69;&#x6c;&#x2e;&#x63;&#111;&#x6d;">&#109;&#105;&#117;&#99;&#x75;&#110;&#x6c;&#x65;&#101;&#x40;&#103;&#109;&#97;&#x69;&#x6c;&#x2e;&#x63;&#111;&#x6d;</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	
	
		  
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://miucun97.github.io/2021/12/04/my-first-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Miucun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Miucun's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/04/my-first-blog/" class="post-title-link" itemprop="url">my-first-blog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-12-04 22:21:11 / 修改时间：22:22:48" itemprop="dateCreated datePublished" datetime="2021-12-04T22:21:11+08:00">2021-12-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>我就是个测试呀！</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

	

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Miucun</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Miucun</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
